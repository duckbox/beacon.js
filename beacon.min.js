(function(){var d=this.document,b=[],c=function(e,f){d.addEventListener(e,f)},a=function(e){var f;if(d.createEvent){f=d.createEvent("HTMLEvents");f.initEvent(e,true,true)}else{f=d.createEventObject();f.eventType=e}if(d.createEvent){d.dispatchEvent(f)}else{d.fireEvent("on"+f.eventType,f)}};this.Beacon=function(){this.id=b.length;b.push(this.id);this.isComplete=false;this.status={};this.done=function(e){if(this.isComplete){return}c("beacondef"+this.id,e)};this.complete=function(){this.isComplete=true;a("beacondef"+this.id)};this.listen=function(e,f){this.status[e]=f};this.status=function(e){return this.status[e]()}}}).call(this);